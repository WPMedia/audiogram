name: audiogram
namespace: siteeng-lincoln
environments:
- name: staging
  type: ecs
  override:
    services:
      app:
        ports:
          - "8145:8000"
        log_driver: awslogs
        log_opt:
          awslogs-group: /nile/siteeng-lincoln/audiogram/staging
          awslogs-region: us-east-1
  resources:
    - vendor: aws
      resource: simple
      settings:
        scheme: internal
        domain: audiogram-staging.wpit.nile.works
        parent_domain: wpit.nile.works
  services:
    - deploymentConfiguration:
        maximumPercent: 200
        minimumHealthyPercent: 50
      desiredCount: 1
      loadBalancers:
        - containerName: app
          containerPort: 8000
          loadBalancerName: se-gfx-audiogram-staging
      serviceName: main
- name: prod
  type: ecs
  override:
    services:
      app:
        ports:
          - "8146:8000"
        log_driver: awslogs
        log_opt:
          awslogs-group: /nile/siteeng-lincoln/audiogram/prod
          awslogs-region: us-east-1
  resources:
    - vendor: aws
      resource: simple
      settings:
        scheme: internal
        domain: audiogram.wpit.nile.works
        parent_domain: wpit.nile.works
  services:
    - deploymentConfiguration:
        maximumPercent: 200
        minimumHealthyPercent: 50
      desiredCount: 3
      loadBalancers:
        - containerName: app
          containerPort: 8000
          loadBalancerName: se-gfx-audiogram-prod
      serviceName: main
